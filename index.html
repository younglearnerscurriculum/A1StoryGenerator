<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kids Story Generator</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(to bottom, #ffe1f0, #d9f2ff);
    height: 100vh;
    overflow: hidden;
  }

  h1 {
    text-align: center;
    font-size: 2.5rem;
    color: #ff4da6;
    margin-top: 20px;
  }

  #star-counter {
    position: fixed;
    top: 15px;
    right: 20px;
    font-size: 1.5rem;
    color: gold;
    background: rgba(255, 255, 255, 0.6);
    padding: 8px 15px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
  }

  .container {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .story-box {
    background: white;
    padding: 25px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    width: 60%;
    max-width: 900px;
    min-height: 500px;
  }

  .story-box input {
    width: 60%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 20px;
    border: 2px solid #ffb347;
    font-size: 16px;
    text-align: center;
  }

  .story-box button {
    margin-top: 15px;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    background: linear-gradient(to right, #ff6f61, #ffb347);
    color: white;
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
  }

  .story-box button:hover {
    transform: scale(1.05);
  }

  .story-output {
    margin-top: 20px;
    font-size: 20px;
    color: #333;
    white-space: pre-line;
    animation: fadeIn 1.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Flying star animation */
  .star {
    position: absolute;
    font-size: 28px;
    color: gold;
    cursor: pointer;
    animation: floatStar 6s linear infinite;
  }

  @keyframes floatStar {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    50% { transform: translateY(-100px) rotate(180deg); opacity: 0.7; }
    100% { transform: translateY(0) rotate(360deg); opacity: 1; }
  }
</style>
</head>
<body>

<h1>üåà Kids Story Generator 1</h1>
<div id="star-counter">‚≠ê 0</div>

<div class="container">
  <div class="story-box">
    <h2>A1 Level ‚Äì Your Adventure Awaits!</h2>
    <input id="mainChar" placeholder="Main Character">
    <input id="friend" placeholder="Friend or Pet">
    <input id="place" placeholder="Where are they? (park, lake)">
    <input id="object" placeholder="Special Object (ball, kite)">
    <input id="problem" placeholder="Simple Problem (lost toy)">
    <br>
    <button onclick="generateStory()">Generate Story</button>
    <button onclick="generateStory()">Generate Again</button>
    <div class="story-output" id="story"></div>
  </div>
</div>

<script>
let starCounter = 0;

// 50 story templates using {0}..{6} for placeholders
const templates = [
  "{0} and {1} went to {2} with a {3}. But {pronoun} {4}. In the end, {pronoun} laughed and played all day!",
  "One sunny day, {0} and {1} took a {3} to {2}. Suddenly, {pronoun} {4}, but it turned into a wonderful adventure!",
  "{0} loved adventures with {1}. Today at {2}, they brought a {3}. Everything was perfect until {pronoun} {4}!",
  "At {2}, {0} and {1} had fun with a {3}. But then, {pronoun} {4}. Luckily, a happy ending came their way!",
  "{0} skipped happily to {2} with {1}. They held a {3}, but soon {pronoun} {4}. What a silly, fun day!"
];
// Expand to 50 templates
while (templates.length < 50) {
  templates.push(...templates);
}
templates.length = 50;

// Determine pronouns
function getPronoun(name) {
  if (!name) return { subject: "they", object: "them", possessive: "their" };

  const lower = name.toLowerCase();
  const maleNames = ["tom","jack","john","max","liam","oliver"];
  const femaleNames = ["lily","mia","sophia","ava","olivia","emma"];

  if (maleNames.includes(lower)) return { subject: "he", object: "him", possessive: "his" };
  if (femaleNames.includes(lower)) return { subject: "she", object: "her", possessive: "her" };

  // If starts with 'the' treat as it
  if (lower.startsWith("the ")) return { subject: "it", object: "it", possessive: "its" };

  return { subject: "they", object: "them", possessive: "their" };
}

function generateStory() {
  const mainChar = document.getElementById('mainChar').value || "A happy child";
  const friend = document.getElementById('friend').value || "their puppy";
  const place = document.getElementById('place').value || "the sunny park";
  const object = document.getElementById('object').value || "a colorful kite";
  const problem = document.getElementById('problem').value || "lost their toy";

  // Get pronouns
  const pronouns = getPronoun(mainChar);

  // Pick a random template
  const template = templates[Math.floor(Math.random() * templates.length)];
  const story = template
    .replace("{0}", mainChar)
    .replace("{1}", friend)
    .replace("{2}", place)
    .replace("{3}", object)
    .replace("{4}", problem)
    .replaceAll("{pronoun}", pronouns.subject);

  document.getElementById('story').textContent = story;

  // Create 8 animated stars
  for (let i = 0; i < 8; i++) createStar();
}

// Create flying star
function createStar() {
  const star = document.createElement('div');
  star.classList.add('star');
  star.textContent = '‚≠ê';
  star.style.top = Math.random() * window.innerHeight + 'px';
  star.style.left = Math.random() * window.innerWidth + 'px';
  star.style.animationDuration = 3 + Math.random() * 4 + 's';

  star.addEventListener('click', () => {
    starCounter++;
    document.getElementById('star-counter').textContent = '‚≠ê ' + starCounter;
    star.remove();
  });

  document.body.appendChild(star);

  setTimeout(() => { star.remove(); }, 6000);
}
</script>

</body>
</html>
